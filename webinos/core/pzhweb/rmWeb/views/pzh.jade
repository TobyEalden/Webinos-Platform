extends layout

block content
  div(data-role='content')
    ul(data-role='listview', data-inset='true', data-theme="a", data-divider-theme="b")
      li(data-role="list-divider",role="heading") #{pzh}
      - if (pzh === serverName) {
        li
          a(href='/invite/#{pzh}',data-transition='slide') Invite a Friend
      - }
      li
        a(href='/approve/#{pzh}',data-transition='slide') Approve a Friend
      li
        a(href='/about-me/#{pzh}') About this PZH
      li(data-role="list-divider",role="heading") Administration
      li
        a(href='/nyi') Service Configuration
      li
        a(href='/nyi') Diagnostics

    - var counter = 0;
    ul(data-role='listview', data-inset='true', data-theme="a", data-divider-theme="b")      
      li(data-role="list-divider", role="heading")  Connected PZPs
      - for (var pzp in pzpList) {
          - if (pzpList[pzp].isConnected) {
            - counter++;
            li
              a(href='/pzp/#{pzpList[pzp].url}',data-transition="slide") #{pzpList[pzp].id}
          - }
      - }
      - if (counter === 0) {
          li none
      - }
      - if (counter !== pzpList.length) {
        li(data-role="list-divider", role="heading") Disconnected PZPs
        - for (var pzp in pzpList) {
            - if (!pzpList[pzp].isConnected) {
                li #{pzpList[pzp].id}
            - }
        - }
      - }
      li(data-role="list-divider", role="heading")
        a(class="dash-refresh",href="#", data-role="button", data-icon="refresh", data-iconpos="left", data-inline="true", data-mini="true") Refresh

    - counter = 0;
    - var haveConnected = false;
    ul(data-role='listview', data-inset='true', data-theme="a", data-divider-theme="b")      
      li(data-role="list-divider", role="heading")  Connected PZHs
      - for (var p in pzhList) {
          - if (pzhList[p].isConnected) {
            - counter++;
            - if (pzhList[p].url !== pzh) {
              - haveConnected = true;
              li
                a(href='/pzp/#{pzhList[p].url}',data-transition="slide") #{pzhList[p].id}
            - }
          - }
      - }
      - if (!haveConnected) {
          li none
      - }
      - if (counter !== pzhList.length) {
        li(data-role="list-divider", role="heading") Disconnected PZHs
        - for (var p in pzhList) {
            - if (!pzhList[p].isConnected) {
                li #{pzhList[p].id}
            - }
        - }
      - }
      li(data-role="list-divider", role="heading")
        a(class="dash-refresh",href="#", data-role="button", data-icon="refresh", data-iconpos="left", data-inline="true", data-mini="true") Refresh
        